<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Cache-control" content="60" />
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0;" name="viewport" />
<meta name="format-detection" content="telephone=no" />
<title>客户端Webview交互测试</title>
<script type="text/javascript">
!function(a,b,c){function q(){var d=Math.min((o?e[h]().width:f.innerWidth)/(a/b),c);d!=p&&(k.innerHTML="html{font-size:"+d+"px!important;"+n+"}",p=d)}function r(){clearTimeout(l),l=setTimeout(q,500)}var l,d=document,e=d.documentElement,f=window,g="addEventListener",h="getBoundingClientRect",i="pageshow",j=d.head||d.getElementsByTagName("HEAD")[0],k=d.createElement("STYLE"),m="text-size-adjust:100%;",n="-webkit-"+m+"-moz-"+m+"-ms-"+m+"-o-"+m+m,o=h in e,p=null;a=a||320,b=b||16,c=c||32,j.appendChild(k),d[g]("DOMContentLoaded",q,!1),"on"+i in f?f[g](i,function(a){a.persisted&&r()},!1):f[g]("load",r,!1),f[g]("resize",r,!1),q()}(
	640,32,32 
);
</script>
<link href="images/style.css?v=002" rel="stylesheet" type="text/css" />
</head>
<body>
<div style="display:none;"><img src="images/ico.jpg"/></div>
<div class="main">
  <div class="box">
    <div class="wall"><img src="images/banner-1.jpg"/></div>
    <div class="icon"><img src="images/icon.png"/></div>
    <div class="round"></div>
  </div>
  <div class="content">
	  <h3>此用例基于<a href="https://github.com/lzyzsd/JsBridge" target="_blank">JSBridge</a>,测试请在安卓客户端内测试</h3>
    
    <!--1-->
    <div class="btn btn1"><a href="javascript:void(0)" data-game_id="29" data-id="" data-name="" data-down_url="" data-package_name="" data-cover="" data-version="">点击下载游戏</a></div>
	  <p>方法:<span>download</span>,点击开始下载游戏，反馈暂停和开始状态。</p>
    
    <!--2-->
    <div class="btn btn2"><a href="javascript:void(0)" data-game_id="545">点击进入游戏详情</a></div>
    <p>方法:<span>open_game_detail</span>,无需多言,熟人都能理解。</p>
    
    <!--3-->
    <div class="btn btn3"><a href="javascript:void(0)" data-gift_id="582">点击进入礼包详情</a></div>
    <p>方法:<span>open_gift_detail</span>,进入礼包详情</p>
    
    <!--4-->
    <div class="btn btn4"><a href="javascript:void(0)">点击进行充值F币</a></div>
    <p>方法:<span>open_charge</span>,点击进入充值页面，后面带参数可以直接选中金额。</p>
    
    <!--5-->
    <div class="btn btn5"><a href="javascript:void(0)" spec_id="33" name="魔幻手游合辑">点击进入游戏专辑</a></div>
    <p>方法:<span>open_game_special</span>,点击进入任何游戏专辑</p>
    
    <!--6-->
    <div class="btn btn6"><a href="javascript:void(0)" cate_id="1" name="角色">点击进入游戏分类</a></div>
    <p>方法:<span>open_game_category</span>,点击进入任何游戏分类</p>
    
    <!--7-->
    <div class="btn btn7"><a href="javascript:void(0)">点击获得登录状态</a></div>
    <p>方法:<span>get_users_status</span>,点击获得登录状态</p>
    
    <!--8-->
    <div class="btn btn8"><a href="javascript:void(0)">点击获取版本信息</a></div>
    <p>方法:<span>get_version</span>,获取版本信息</p>

     <!--9-->
     <div class="btn btn9"><a href="javascript:void(0)">点击下载普通APK</a></div>
     <p>方法:<span>download_apk</span>,下载普通APK</p>

     <!--10-->
     <div class="btn btn10"><a href="javascript:void(0)">助手调用分享</a></div>
     <p>方法:<span>share</span>,打开系统分享</p>
     
     <!--11-->
     <div class="btn btn11"><a href="javascript:void(0)">打开首充券</a></div>
     <p>方法:<span>firstpay</span>,打开首充券</p>
     
     <!--12-->
     <div class="btn btn12"><a href="javascript:void(0)">打开绑定手机页面</a></div>
     <p>方法:<span>bind_phone</span>,打开绑定手机页面</p>

     <!--13-->
     <div class="btn btn13"><a href="javascript:void(0)">游戏下载进度</a></div>
     <p>方法:<span>get_download_info</span>,参数:down_url,获取游戏下载进度</p>

     <!--14-->
     <div class="btn btn14"><a href="javascript:void(0)">获取游戏安装包名</a></div>
     <p>方法:<span>install_game_package</span>,获取游戏安装包名</p>

     <!--15-->
     <div class="btn btn15"><a href="javascript:void(0)">安装游戏</a></div>
     <p>方法:<span>install</span>,安装游戏</p>

  </div>
  
  <!--toast-->
  <div id="toast"><p></p></div>
</div>

<script src="//tcnd.vaf.cn/common/jquery.js"></script>
<script src="//tcnd.vaf.cn/common/jsbridge.js"></script>
<script type="text/javascript">
$(function() {
    //下载
    $(".btn1 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('download', {
            'down_url': $(this).data('down_url'),
            'id': $(this).data('id'),
            'package_name': $(this).data('package_name'),
            'cover': $(this).data('cover'),
            'name': $(this).data('name'),
            'version': $(this).data('version')
        },
        function(response) {});
    });

    $(".btn2 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('open_game_detail', $(this).attr('data-game_id'),
        function(response) {});
    });

    $(".btn3 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('open_gift_detail', $(this).attr('data-gift_id'),
        function(response) {});
    });

    $(".btn4 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('open_charge');
    });

    $(".btn5 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('open_game_special',

        {
            'id': $(this).attr('spec_id'),
            'name': $(this).attr('name')
        },
        function(response) {}

        );
    });

    $(".btn6 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('open_game_category', {
            'id': $(this).attr('cate_id'),
            'name': $(this).attr('name')
        },
        function(response) {});
    });

    $(".btn7 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('get_users_status', {},
        function(responseData) {

		$('#toast').show();
		$('#toast p').html(responseData);
		setTimeout(function() {
            $('#toast').hide();
        }, 3000);
        });
    });

    $(".btn8 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('get_version', {},
        function(responseData) {
			
		$('#toast').show();
		$('#toast p').html(responseData);
		setTimeout(function() {
            $('#toast').hide();
        }, 3000);
		
        });
    });

    $(".btn9 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('download_apk', 'http://www.anfan.com/qh.apk',
                function(responseData) {

                    alert('正在下载')
                });
    });
	
	$(".btn10 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('share',{},
                function(responseData) {
					
					$('#toast').show();
					$('#toast p').html("开始分享");
					setTimeout(function() {
						$('#toast').hide();
					}, 3000);
		
                });
	
    });
	
	
	$(".btn11 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('firstpay');
    });
	

    $(".btn12 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('bind_phone');
    });

    $(".btn13 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('get_download_info',
            {'down_url':'http://apk4.anfan.com/3496_846-rwu'},
                function(request) { 
                    $('#toast').show();
                    $('#toast p').html(request);
                    setTimeout(function() {
                        $('#toast').hide();
                    }, 3000);
                });
    });
    

    $(".btn14 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('install_game_package',{},
                function(responseData) { 
                    $('#toast').show();
                    $('#toast p').html(responseData);
                    setTimeout(function() {
                        $('#toast').hide();
                    }, 3000);
                });
    });

    $(".btn15 a").click(function() {
        window.WebViewJavascriptBridge.callHandler('install',
            {'down_url':'http://apk4.anfan.com/3496_846-rwu'});
    });




	//回调需要用到的函数
    function connectWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) {
            callback(WebViewJavascriptBridge)
        } else {
            document.addEventListener('WebViewJavascriptBridgeReady',
            function() {
                callback(WebViewJavascriptBridge)
            },
            false);
        }
    }

    connectWebViewJavascriptBridge(function(bridge) {
        bridge.init(function(message, responseCallback) {
            responseCallback(data);
        });
    })
});
</script>
</body>
</html>
